<!DOCTYPE html>
<html>
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src=\"https://www.googletagmanager.com/gtag/js?id=G-HSBGM1MH5N\"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-HSBGM1MH5N');
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zonas 11 - VR Mundo 6 (V2.8)</title>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <!-- Enhanced Controls: Componente modular extensível -->
    <script src="assets/js/enhanced-controls.js"></script>
    <!-- Navigation Helper: Sistema dual AR/VR -->
    <script src="assets/js/navigation-helper.js"></script>
    <style>
      body { margin: 0; overflow: hidden; font-family: Arial, sans-serif; }
    </style>
    <!--
    =====================================================
    ZONAS 11 - MUNDO VR 6 (OBRAS 38-42)
    =====================================================
    
    DESCRIÇÃO:
    - Sexto mundo VR acessível via marcador barcode-5
    - Contém 5 obras de arte (primeira com Vimeo)
    - Navegação: Clique para acessar obras individuais
    - Botão voltar: Retorna para galeria AR principal
    
    ESTRUTURA:
    - Fundo 360°: Ambiente mundo 6 (fundo_mundo06.jpg)
    - 5 Obras: Obras 38-42 em layout circular otimizado
    - Esfera voltar: Cor padronizada #FF5722
    - Animações: Movimentos orgânicos e variados
    
    INTERAÇÃO:
    - Clique em obras 38-42: Redireciona para obra{i}.html
    - Clique na esfera: Volta para galeria.html
    - Layout otimizado: 5 obras em 72° cada (360°/5)
    - Primeira obra Vimeo: Sistema de detecção automático
    ====================================================
    -->
  </head>
  <body>
    <a-scene
      cursor="rayOrigin: mouse"
      vr-mode-ui="enabled: true"
    >
      <!-- 🖼️ FUNDO 360° MUNDO 6 -->
      <a-sky src="https://rodrigorez.github.io/zonas11/galerias/assets/img/fundo_mundo06.jpg"></a-sky>

      <!-- 🔴 ESFERA VOLTAR -->
      <a-sphere
        class="clickable-back"
        position="0 1.6 -4"
        radius="0.4"
        color="#FF5722"
        animation__float="property: position; to: 0 2.2 -4; dur: 2000; easing: easeInOutSine; loop: true; dir: alternate"
        animation__rotate="property: rotation; to: 0 360 0; dur: 7500; easing: linear; loop: true"
      >
        <a-entity
          position="0 0.6 0"
          text="value: ↩️\nVOLTAR; align: center; color: white; width: 3"
          scale="1.2 1.2 1.2"
        ></a-entity>
      </a-sphere>

      <!-- 🖼️ GALERIA CIRCULAR MUNDO 6 - 5 OBRAS (38-42) + 1 ESFERA (6 slots x 60°) -->
      <!-- Obra 38 - 60° (VIMEO) -->
      <a-plane
        class="clickable-image obra38"
        position="3.46 1.6 -2"
        width="1.2"
        height="0.8"
        rotation="0 60 0"
        material="src: url(https://rodrigorez.github.io/zonas11/galerias/assets/img/38.jpg); side: double;"
        animation__float="property: position; to: 3.46 2.1 -2; dur: 3100; easing: easeInOutSine; loop: true; dir: alternate"
        animation__swing="property: rotation; to: 0 78 5; dur: 4100; easing: easeInOutSine; loop: true; dir: alternate"
      ></a-plane>
      
      <!-- Obra 39 - 120° -->
      <a-plane
        class="clickable-image obra39"
        position="3.46 1.6 2"
        width="1.2"
        height="0.8"
        rotation="0 120 0"
        material="src: url(https://rodrigorez.github.io/zonas11/galerias/assets/img/39.jpg); side: double;"
        animation__float="property: position; to: 3.46 2.3 2; dur: 3300; easing: easeInOutSine; loop: true; dir: alternate"
        animation__swing="property: rotation; to: 8 135 0; dur: 4300; easing: easeInOutSine; loop: true; dir: alternate"
      ></a-plane>
      
      <!-- Obra 40 - 180° -->
      <a-plane
        class="clickable-image obra40"
        position="0 1.6 4"
        width="1.2"
        height="0.8"
        rotation="0 180 0"
        material="src: url(https://rodrigorez.github.io/zonas11/galerias/assets/img/40.jpg); side: double;"
        animation__float="property: position; to: 0 2.5 4; dur: 2900; easing: easeInOutSine; loop: true; dir: alternate"
        animation__swing="property: rotation; to: -8 195 -8; dur: 3900; easing: easeInOutSine; loop: true; dir: alternate"
      ></a-plane>
      
      <!-- Obra 41 - 240° -->
      <a-plane
        class="clickable-image obra41"
        position="-3.46 1.6 2"
        width="1.2"
        height="0.8"
        rotation="0 240 0"
        material="src: url(https://rodrigorez.github.io/zonas11/galerias/assets/img/41.jpg); side: double;"
        animation__float="property: position; to: -3.46 2.0 2; dur: 3500; easing: easeInOutSine; loop: true; dir: alternate"
        animation__swing="property: rotation; to: 0 255 8; dur: 4500; easing: easeInOutSine; loop: true; dir: alternate"
      ></a-plane>
      
      <!-- Obra 42 - 300° -->
      <a-plane
        class="clickable-image obra42"
        position="-3.46 1.6 -2"
        width="1.2"
        height="0.8"
        rotation="0 300 0"
        material="src: url(https://rodrigorez.github.io/zonas11/galerias/assets/img/42.jpg); side: double;"
        animation__float="property: position; to: -3.46 2.7 -2; dur: 3700; easing: easeInOutSine; loop: true; dir: alternate"
        animation__swing="property: rotation; to: 8 315 0; dur: 3700; easing: easeInOutSine; loop: true; dir: alternate"
      ></a-plane>

      <!-- 👁️ Câmera com Enhanced Controls -->
      <a-entity 
        camera 
        look-controls 
        enhanced-controls="rotationSpeed: 45; enableRotation: false; enableMovement: true; moveSpeed: 3; enableMouseDrag: true; mouseDragSpeed: 0.01"
        position="0 1.6 0"
      ></a-entity>
    </a-scene>

    <script>
      AFRAME.registerComponent('redirect-on-click', {
        schema: { url: { type: 'string', default: '#' } },
        init: function () {
          const el = this.el;
          const url = this.data.url;
          el.addEventListener('click', () => {
            el.setAttribute('scale', '1.2 1.2 1.2');
            setTimeout(() => { window.location.href = url; }, 300);
          });
        }
      });

      document.addEventListener('DOMContentLoaded', () => {
        const source = getNavigationSource();
        console.log(`🌍 Mundo 6: Origem detectada → ${source.toUpperCase()}`);
        
        const backSphere = document.querySelector('.clickable-back');
        if (backSphere) {
          const galleryURL = getGalleryURL(source);
          backSphere.setAttribute('redirect-on-click', { url: galleryURL });
          console.log(`🔙 Botão voltar configurado para: ${galleryURL}`);
        }

        for (let i = 38; i <= 42; i++) {
          const obra = document.querySelector(`.obra${i}`);
          if (obra) {
            const obraURL = getObraURL(i, source);
            obra.setAttribute('redirect-on-click', { url: obraURL });
          }
        }
        
        console.log(`✅ Mundo 6: Navegação contextual (${source.toUpperCase()}) configurada`);
      });
    </script>
  </body>
</html>