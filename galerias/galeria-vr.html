<!DOCTYPE html>
<html>
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src=\"https://www.googletagmanager.com/gtag/js?id=G-HSBGM1MH5N\"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-HSBGM1MH5N');
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zonas 11 - Galeria VR (V2.8)</title>
    <style>
      body { margin: 0; overflow: hidden; }
      
      /* =====================================================
         🖼️ LOGO ZONAS - Overlay Fixo no Fundo Centro
         =====================================================
         Logo PNG transparente que acompanha a câmera
         - Posição: Fundo centro (verticalmente embaixo, horizontalmente centralizado)
         - Tamanho: 1/3 da largura da tela (33.333% vw) - DOBRO DO TAMANHO ORIGINAL
         - Comportamento: Fixo na viewport, não rola
         ===================================================== */
      
      #zonas-logo {
        position: fixed;              /* Fixo na tela (acompanha câmera) */
        bottom: 2%;                   /* 2% do fundo (margem padrão) */
        left: 50%;                    /* Centro horizontal */
        transform: translateX(-50%); /* Ajuste fino para centralizar */
        width: 33.333vw;              /* 1/3 da largura da tela (dobro do original 16.666vw) */
        height: auto;                 /* Mantém proporção original */
        z-index: 9999;                /* Sempre acima de tudo */
        pointer-events: none;         /* Não bloqueia cliques (passa-through) */
        opacity: 0.95;                /* Levemente transparente (opcional) */
      }
      
      /* =====================================================
         📱 RESPONSIVIDADE - Ajustes para telas pequenas
         =====================================================
         Em telas muito pequenas, aumenta um pouco o logo
         para manter visibilidade
         ===================================================== */
      
      @media (max-width: 768px) {
        #zonas-logo {
          width: 40vw;    /* Proporcionalmente maior em tablets */
          bottom: 3%;     /* 3% de margem em telas menores */
        }
      }
      
      @media (max-width: 480px) {
        #zonas-logo {
          width: 50vw;    /* 1/2 da tela em mobile (bem visível) */
          bottom: 3%;     /* 3% de margem em telas menores */
        }
      }
    </style>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="assets/js/enhanced-controls.js"></script>
    <script src="assets/js/navigation-helper.js"></script>
    <!--
    =====================================================
    ZONAS 11 - GALERIA PRINCIPAL VR (V2.8)
    =====================================================
    
    DESCRIÇÃO:
    - Galeria de Realidade Virtual com navegação livre
    - 10 objetos 3D flutuantes representando 10 mundos VR
    - 70 obras de arte distribuídas em 10 mundos
    - Objetos 3D clicáveis com redirecionamento
    
    ESTRUTURA DOS MUNDOS:
    - Objeto 01.glb (0°)   → Mundo 1: Obras 1-7   (index2.html?from=vr)
    - Objeto 02.glb (36°)  → Mundo 2: Obras 8-14  (index3.html?from=vr)
    - Objeto 03.glb (72°)  → Mundo 3: Obras 15-21 (index4.html?from=vr)
    - Objeto 04.glb (108°) → Mundo 4: Obras 22-28 (index5.html?from=vr)
    - Objeto 05.glb (144°) → Mundo 5: Obras 29-37 (index6.html?from=vr)
    - Objeto 06.glb (180°) → Mundo 6: Obras 38-42 (index7.html?from=vr)
    - Objeto 07.glb (216°) → Mundo 7: Obras 43-48 (index8.html?from=vr)
    - Objeto 08.glb (252°) → Mundo 8: Obras 49-55 (index9.html?from=vr)
    - Objeto 09.glb (288°) → Mundo 9: Obras 57-63 (index10.html?from=vr)
    - Objeto 10.glb (324°) → Mundo 10: Obras 65-70 (index11.html?from=vr)
    
    FUNCIONALIDADES:
    - Navegação livre: WASD + Mouse (rotação horizontal + vertical)
    - Modelos 3D: .glb com animações orgânicas
    - Cores: Material vermelho (#FF0000) padronizado
    
    INTERAÇÃO:
    - Clique no objeto: Redireciona para mundo VR com ?from=vr
    - Navegação preserva contexto VR em toda cadeia
    
    DISPOSIÇÃO CIRCULAR:
    - Raio: 4 metros
    - Altura: 1.6 metros (nível dos olhos)
    - Ângulos: 0°, 36°, 72°, 108°, 144°, 180°, 216°, 252°, 288°, 324°
    ====================================================
    -->
  </head>
  <body>
    <!-- =====================================================
         🖼️ LOGO ZONAS - Overlay HTML Fixo
         =====================================================
         PNG transparente posicionado no topo centro da tela
         Acompanha a câmera automaticamente (position: fixed)
         
         CONFIGURAÇÃO:
         - Para ocultar: Remova esta tag <img> ou adicione style="display:none"
         - Para ajustar tamanho: Edite width no CSS #zonas-logo
         - Para mudar posição: Edite top/left no CSS
         ===================================================== -->
    
    <img 
      id="zonas-logo" 
      src="https://rodrigorez.github.io/zonas11/galerias/assets/img/zonas.png" 
      alt="Zonas 11"
    >
    
    <a-scene
      cursor="rayOrigin: mouse"
      vr-mode-ui="enabled: true"
    >
      <!-- 🖼️ FUNDO 360° -->
      <a-sky color="#0a0a0a"></a-sky>

      <!-- ===============================================
           OBJETOS 3D - 10 MUNDOS (DISPOSIÇÃO CIRCULAR)
           =============================================== -->

      <!-- MUNDO 1 - Posição 0° (Norte) -->
      <a-entity 
        class="world-portal mundo1"
        gltf-model="https://rodrigorez.github.io/zonas11/galerias/assets/3d/01.glb" 
        position="0 1.6 -4"
        scale="0.8 0.8 0.8"
        animation__float="property: position; to: 0 2.2 -4; dur: 3000; easing: easeInOutSine; loop: true; dir: alternate"
        animation__rotate="property: rotation; to: 0 360 0; dur: 4200; easing: linear; loop: true"
      ></a-entity>

      <!-- MUNDO 2 - Posição 36° -->
      <a-entity 
        class="world-portal mundo2"
        gltf-model="https://rodrigorez.github.io/zonas11/galerias/assets/3d/02.glb" 
        position="2.35 1.6 -3.24"
        scale="0.8 0.8 0.8"
        animation__float="property: position; to: 2.35 2.2 -3.24; dur: 3200; easing: easeInOutSine; loop: true; dir: alternate"
        animation__rotate="property: rotation; to: 0 360 0; dur: 3800; easing: linear; loop: true"
      ></a-entity>

      <!-- MUNDO 3 - Posição 72° -->
      <a-entity 
        class="world-portal mundo3"
        gltf-model="https://rodrigorez.github.io/zonas11/galerias/assets/3d/03.glb" 
        position="3.81 1.6 -1.24"
        scale="0.8 0.8 0.8"
        animation__float="property: position; to: 3.81 2.2 -1.24; dur: 2800; easing: easeInOutSine; loop: true; dir: alternate"
        animation__rotate="property: rotation; to: 0 360 0; dur: 4600; easing: linear; loop: true"
      ></a-entity>

      <!-- MUNDO 4 - Posição 108° -->
      <a-entity 
        class="world-portal mundo4"
        gltf-model="https://rodrigorez.github.io/zonas11/galerias/assets/3d/04.glb" 
        position="3.81 1.6 1.24"
        scale="0.8 0.8 0.8"
        animation__float="property: position; to: 3.81 2.2 1.24; dur: 3400; easing: easeInOutSine; loop: true; dir: alternate"
        animation__rotate="property: rotation; to: 0 360 0; dur: 3600; easing: linear; loop: true"
      ></a-entity>

      <!-- MUNDO 5 - Posição 144° -->
      <a-entity 
        class="world-portal mundo5"
        gltf-model="https://rodrigorez.github.io/zonas11/galerias/assets/3d/05.glb" 
        position="2.35 1.6 3.24"
        scale="0.8 0.8 0.8"
        animation__float="property: position; to: 2.35 2.2 3.24; dur: 3600; easing: easeInOutSine; loop: true; dir: alternate"
        animation__rotate="property: rotation; to: 0 360 0; dur: 4000; easing: linear; loop: true"
      ></a-entity>

      <!-- MUNDO 6 - Posição 180° -->
      <a-entity 
        class="world-portal mundo6"
        gltf-model="https://rodrigorez.github.io/zonas11/galerias/assets/3d/06.glb" 
        position="0 1.6 4"
        scale="0.8 0.8 0.8"
        animation__float="property: position; to: 0 2.2 4; dur: 3800; easing: easeInOutSine; loop: true; dir: alternate"
        animation__rotate="property: rotation; to: 0 360 0; dur: 4200; easing: linear; loop: true"
      ></a-entity>

      <!-- MUNDO 7 - Posição 216° -->
      <a-entity 
        class="world-portal mundo7"
        gltf-model="https://rodrigorez.github.io/zonas11/galerias/assets/3d/07.glb" 
        position="-2.35 1.6 3.24"
        scale="0.8 0.8 0.8"
        animation__float="property: position; to: -2.35 2.2 3.24; dur: 3300; easing: easeInOutSine; loop: true; dir: alternate"
        animation__rotate="property: rotation; to: 0 360 0; dur: 3900; easing: linear; loop: true"
      ></a-entity>

      <!-- MUNDO 8 - Posição 252° -->
      <a-entity 
        class="world-portal mundo8"
        gltf-model="https://rodrigorez.github.io/zonas11/galerias/assets/3d/08.glb" 
        position="-3.81 1.6 1.24"
        scale="0.8 0.8 0.8"
        animation__float="property: position; to: -3.81 2.2 1.24; dur: 3100; easing: easeInOutSine; loop: true; dir: alternate"
        animation__rotate="property: rotation; to: 0 360 0; dur: 4100; easing: linear; loop: true"
      ></a-entity>

      <!-- MUNDO 9 - Posição 288° -->
      <a-entity 
        class="world-portal mundo9"
        gltf-model="https://rodrigorez.github.io/zonas11/galerias/assets/3d/09.glb" 
        position="-3.81 1.6 -1.24"
        scale="0.8 0.8 0.8"
        animation__float="property: position; to: -3.81 2.2 -1.24; dur: 2900; easing: easeInOutSine; loop: true; dir: alternate"
        animation__rotate="property: rotation; to: 0 360 0; dur: 3700; easing: linear; loop: true"
      ></a-entity>

      <!-- MUNDO 10 - Posição 324° (NOVO) -->
      <a-entity 
        class="world-portal mundo10"
        gltf-model="https://rodrigorez.github.io/zonas11/galerias/assets/3d/10.glb" 
        position="-2.35 1.6 -3.24"
        scale="0.8 0.8 0.8"
        animation__float="property: position; to: -2.35 2.2 -3.24; dur: 3500; easing: easeInOutSine; loop: true; dir: alternate"
        animation__rotate="property: rotation; to: 0 360 0; dur: 4300; easing: linear; loop: true"
      ></a-entity>

      <!-- 👁️ Câmera com Enhanced Controls -->
      <a-entity 
        camera 
        look-controls
        enhanced-controls="rotationSpeed: 45; enableRotation: false; enableMovement: true; moveSpeed: 3; enableMouseDrag: true; mouseDragSpeed: 0.01"
        position="0 1.6 0"
      ></a-entity>
    </a-scene>

    <script>
      // =====================================================
      // 🎨 SISTEMA DE CORES - CONFIGURAÇÃO GLOBAL
      // =====================================================
      // 
      // Este sistema permite controlar as cores dos objetos 3D
      // da galeria de forma simples e flexível.
      //
      // COMO FUNCIONA:
      // 1. MODE define o comportamento padrão de TODOS os objetos
      // 2. Cada objeto pode ter uma cor local que SEMPRE prevalece
      //
      // =====================================================
      
      // -----------------------------------------------------
      // 🟢 MODE - Comportamento Padrão Global
      // -----------------------------------------------------
      // Define como os objetos SEM cor local se comportam
      //
      // Opções disponíveis:
      //   'original' → Mantém as cores originais do arquivo GLB
      //   'global'   → Todos usam a cor definida em GLOBAL_COLOR
      //
      // EXEMPLOS:
      //   const MODE = 'original';  // Cores nativas dos arquivos GLB
      //   const MODE = 'global';    // Todos com a mesma cor
      // -----------------------------------------------------
      
      const MODE = 'original';
      
      // -----------------------------------------------------
      // 🎨 GLOBAL_COLOR - Cor Global Unificada
      // -----------------------------------------------------
      // Cor aplicada quando MODE = 'global'
      // Formato: Hexadecimal 0xRRGGBB
      //
      // EXEMPLOS DE CORES:
      //   0xFF0000  → Vermelho
      //   0x00FF00  → Verde
      //   0x0000FF  → Azul
      //   0xFFFF00  → Amarelo
      //   0xFF00FF  → Magenta
      //   0x00FFFF  → Ciano
      //   0xFFFFFF  → Branco
      //   0x000000  → Preto
      //   0xFF8800  → Laranja
      //   0x8800FF  → Roxo
      // -----------------------------------------------------
      
      const GLOBAL_COLOR = 0xFF0000;
      
      // =====================================================
      // 📝 GUIA RÁPIDO DE USO:
      // =====================================================
      //
      // ✔️ CENAÁRIO 1: Manter cores originais dos arquivos GLB
      //    const MODE = 'original';
      //    (Não precisa mexer em GLOBAL_COLOR)
      //
      // ✔️ CENAÁRIO 2: Todos os objetos vermelhos
      //    const MODE = 'global';
      //    const GLOBAL_COLOR = 0xFF0000;
      //
      // ✔️ CENAÁRIO 3: Todos azuis
      //    const MODE = 'global';
      //    const GLOBAL_COLOR = 0x0000FF;
      //
      // ✔️ CENAÁRIO 4: Cores originais MAS Mundo 3 sempre verde
      //    const MODE = 'original';
      //    (No array portals, definir: color: 0x00FF00 no mundo3)
      //
      // ✔️ CENAÁRIO 5: Todos vermelhos MAS Mundo 5 azul
      //    const MODE = 'global';
      //    const GLOBAL_COLOR = 0xFF0000;
      //    (No array portals, definir: color: 0x0000FF no mundo5)
      //
      // =====================================================

      // Componente de redirecionamento (reutilizado do sistema existente)
      AFRAME.registerComponent('redirect-on-click', {
        schema: { url: { type: 'string', default: '#' } },
        init: function () {
          const el = this.el;
          const url = this.data.url;

          el.addEventListener('click', () => {
            el.setAttribute('scale', '1.2 1.2 1.2');
            setTimeout(() => {
              window.location.href = url;
            }, 300);
          });
        }
      });

      document.addEventListener('DOMContentLoaded', () => {
        console.log('🥽 Galeria VR: Inicializando...');
        
        // =====================================================
        // 🎯 ARRAY DE PORTAIS - Configuração dos 10 Mundos
        // =====================================================
        //
        // Cada objeto representa um mundo da galeria VR.
        // Você pode definir cores individuais aqui.
        //
        // PROPRIEDADES:
        //   - class: Classe CSS do objeto (NÃO ALTERAR)
        //   - mundoNum: Número do mundo para navegação (NÃO ALTERAR)
        //   - nome: Descrição do mundo (opcional, para documentação)
        //   - color: Cor ESPECÍFICA deste objeto (formato: 0xRRGGBB)
        //
        // =====================================================
        // 🔴 ATENÇÃO: PROPRIEDADE 'color'
        // =====================================================
        //
        // Se color = null:
        //   → Objeto segue o MODE (original ou global)
        //
        // Se color = 0xRRGGBB (ex: 0xFF0000):
        //   → Objeto SEMPRE usa essa cor (IGNORA MODE)
        //
        // EXEMPLOS DE COR INDIVIDUAL:
        //   color: null       → Segue MODE
        //   color: 0xFF0000   → Sempre vermelho
        //   color: 0x00FF00   → Sempre verde
        //   color: 0x0000FF   → Sempre azul
        //   color: 0xFFFF00   → Sempre amarelo
        //   color: 0xFF00FF   → Sempre magenta
        //
        // =====================================================
        // 📝 CASOS DE USO COMUNS:
        // =====================================================
        //
        // ✔️ Todos seguem MODE:
        //    Deixe todos com color: null
        //
        // ✔️ Destacar apenas o Mundo 5:
        //    MODE = 'original' (todos com cores GLB)
        //    mundo5: color: 0xFF0000 (só ele vermelho)
        //
        // ✔️ Arco-íris (cada mundo uma cor):
        //    MODE = 'original' (não importa)
        //    mundo1: color: 0xFF0000  (vermelho)
        //    mundo2: color: 0xFF8800  (laranja)
        //    mundo3: color: 0xFFDD00  (amarelo)
        //    mundo4: color: 0x00FF00  (verde)
        //    mundo5: color: 0x00DDDD  (ciano)
        //    mundo6: color: 0x0000FF  (azul)
        //    mundo7: color: 0x8800FF  (roxo)
        //    mundo8: color: 0xFF00FF  (magenta)
        //    mundo9: color: 0xFF0088  (rosa)
        //    mundo10: color: 0xFFFFFF (branco)
        //
        // ✔️ Todos vermelhos EXCETO Mundo 3 (azul):
        //    MODE = 'global'
        //    GLOBAL_COLOR = 0xFF0000
        //    mundo3: color: 0x0000FF
        //
        // =====================================================
        
        const portals = [
          { 
            class: 'mundo1', 
            mundoNum: 2, 
            nome: 'Mundo 1 (Obras 1-7)',
            color: null  // null = segue MODE | 0xRRGGBB = cor fixa
          },
          { 
            class: 'mundo2', 
            mundoNum: 3, 
            nome: 'Mundo 2 (Obras 8-14)',
            color: null  // Altere aqui para cor específica (ex: 0xFF8800)
          },
          { 
            class: 'mundo3', 
            mundoNum: 4, 
            nome: 'Mundo 3 (Obras 15-21)',
            color: null  // Exemplo: color: 0xFFDD00 (amarelo ouro)
          },
          { 
            class: 'mundo4', 
            mundoNum: 5, 
            nome: 'Mundo 4 (Obras 22-28)',
            color: null  // Exemplo: color: 0x00FF00 (verde)
          },
          { 
            class: 'mundo5', 
            mundoNum: 6, 
            nome: 'Mundo 5 (Obras 29-37)',
            color: null  // Exemplo: color: 0x00DDDD (ciano)
          },
          { 
            class: 'mundo6', 
            mundoNum: 7, 
            nome: 'Mundo 6 (Obras 38-42)',
            color: null  // Exemplo: color: 0x0088FF (azul)
          },
          { 
            class: 'mundo7', 
            mundoNum: 8, 
            nome: 'Mundo 7 (Obras 43-48)',
            color: null  // Exemplo: color: 0x8800FF (roxo)
          },
          { 
            class: 'mundo8', 
            mundoNum: 9, 
            nome: 'Mundo 8 (Obras 49-55)',
            color: null  // Exemplo: color: 0xFF00FF (magenta)
          },
          { 
            class: 'mundo9', 
            mundoNum: 10, 
            nome: 'Mundo 9 (Obras 57-63)',
            color: null  // Exemplo: color: 0xFF0088 (rosa)
          },
          { 
            class: 'mundo10', 
            mundoNum: 11, 
            nome: 'Mundo 10 (Obras 65-70)',
            color: null  // Exemplo: color: 0xFFFFFF (branco)
          }
        ];
        
        // Configurar cada portal
        portals.forEach(portal => {
          const entity = document.querySelector(`.${portal.class}`);
          
          if (entity) {
            // Gerar URL do mundo com parâmetro ?from=vr
            const mundoURL = getMundoURL(portal.mundoNum, 'vr');
            
            // Configurar redirecionamento
            entity.setAttribute('redirect-on-click', { url: mundoURL });
            console.log(`🌍 Portal configurado: ${portal.nome} → ${mundoURL}`);
            
            // Aplicar cor ao modelo 3D quando carregar
            entity.addEventListener('model-loaded', () => {
              setTimeout(() => {
                const mesh = entity.getObject3D('mesh');
                
                if (mesh) {
                  let finalColor = null;
                  let colorSource = '';
                  
                  // =====================================================
                  // SISTEMA SIMPLIFICADO (2 NÍVEIS)
                  // =====================================================
                  
                  // NÍVEL 1: Cor definida no objeto (SEMPRE prevalece)
                  if (portal.color !== null && portal.color !== undefined) {
                    finalColor = portal.color;
                    colorSource = `COR LOCAL (#${portal.color.toString(16).toUpperCase().padStart(6, '0')})`;
                  }
                  // NÍVEL 2: Seguir MODE
                  else {
                    switch (MODE) {
                      case 'global':
                        finalColor = GLOBAL_COLOR;
                        colorSource = `COR GLOBAL (#${GLOBAL_COLOR.toString(16).toUpperCase().padStart(6, '0')})`;
                        break;
                        
                      case 'original':
                      default:
                        finalColor = null;
                        colorSource = 'COR ORIGINAL DO GLB';
                        break;
                    }
                  }
                  
                  // =====================================================
                  // APLICAR COR (se definida)
                  // =====================================================
                  if (finalColor !== null) {
                    let materialsCount = 0;
                    
                    mesh.traverse((child) => {
                      if (child.isMesh && child.material) {
                        materialsCount++;
                        
                        if (Array.isArray(child.material)) {
                          child.material.forEach((mat) => {
                            mat.color.setHex(finalColor);
                            mat.needsUpdate = true;
                          });
                        } else {
                          child.material.color.setHex(finalColor);
                          child.material.needsUpdate = true;
                        }
                      }
                    });
                    
                    console.log(`✅ ${portal.nome}: ${colorSource} (${materialsCount} materiais)`);
                  } else {
                    console.log(`🎨 ${portal.nome}: ${colorSource}`);
                  }
                } else {
                  console.warn(`⚠️ ${portal.nome}: Mesh não encontrada`);
                }
              }, 100);
            });
          } else {
            console.error(`❌ Portal não encontrado: ${portal.class}`);
          }
        });
        
        console.log('✅ Galeria VR: Inicialização completa');
        console.log('📋 Controles disponíveis:');
        console.log('   - W/A/S/D: Movimento');
        console.log('   - Mouse: Olhar ao redor + Rotação');
        console.log('   - Clique: Acessar mundo VR');
      });
    </script>
  </body>
</html>
